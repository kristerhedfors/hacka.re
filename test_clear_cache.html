<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Cache Clear Test</title>
</head>
<body>
    <h1>Testing Cross-Tab Sync with Fresh Code</h1>
    <p>Timestamp: <span id="timestamp"></span></p>
    <button onclick="checkSyncService()">Check Sync Service</button>
    <pre id="output"></pre>
    
    <script>
        // Show timestamp to verify no caching
        document.getElementById('timestamp').textContent = new Date().toISOString();
        
        function checkSyncService() {
            const output = document.getElementById('output');
            
            // Get the CrossTabSyncService code
            const serviceCode = window.CrossTabSyncService ? window.CrossTabSyncService.toString() : 'Not loaded';
            
            // Check if it contains old patterns
            const hasOldPattern = serviceCode.includes('hackare_history_hash');
            const hasNewPattern = serviceCode.includes('DataService.saveSyncVariable');
            
            output.textContent = JSON.stringify({
                timestamp: new Date().toISOString(),
                hasOldPattern: hasOldPattern,
                hasNewPattern: hasNewPattern,
                codeSnippet: serviceCode.substring(0, 500)
            }, null, 2);
        }
    </script>
    
    <!-- Load the sync service with cache busting -->
    <script src="js/services/cross-tab-sync-service.js?v=<?php echo time(); ?>"></script>
</body>
</html>