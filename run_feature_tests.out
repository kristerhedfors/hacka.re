======================================
üöÄ FEATURE TESTS STARTING
======================================

üìÅ TEST ARTIFACTS WILL BE STORED IN:
  üì∏ Screenshots: /Users/user/dev/hacka.re/_tests/playwright/screenshots/
  üìù Metadata: /Users/user/dev/hacka.re/_tests/playwright/screenshots_data/
  üñ•Ô∏è Console logs: /Users/user/dev/hacka.re/_tests/playwright/console_logs/
  üìä Test output: /Users/user/dev/hacka.re/_tests/playwright/run_feature_tests.out

üí° TIP: Run ./show_test_artifacts.sh to see all artifacts
======================================

Starting HTTP server for tests...
===== Starting HTTP Server for hacka.re Tests =====
Port: 8000
Project Root: /Users/user/dev/hacka.re
==================================================
Checking for existing HTTP server processes on port 8000...
No existing processes found on port 8000.
Changing to project root directory: /Users/user/dev/hacka.re
Starting Python HTTP server on port 8000...
Server started successfully with PID: 20019
Server is now running at http://localhost:8000
Server PID saved to: /Users/user/dev/hacka.re/_tests/playwright/server_pid.txt
==================================================
Server is ready. You can now run your tests.
To stop the server, run: kill -9 $(cat /Users/user/dev/hacka.re/_tests/playwright/server_pid.txt)
==================================================
Running Advanced Feature tests with chromium browser...
Test filter: not (test_page or test_api or test_chat or test_welcome_modal) and (test_function_modal or test_function_icons or test_sharing or test_default_prompts or test_themes or test_clear_chat or test_model_selection or test_copy_chat or test_button_tooltips or test_function_library or test_context_window or test_function_copy or test_function_deletion or test_function_editing or test_function_group or test_function_parsing or test_function_tooltip or test_deterministic_crypto or test_clear_namespace or test_system_prompt or test_token_counter or test_input_field or test_logo_tooltip or test_modals or test_debug_mode or test_model_context_window or test_owasp_prompt_bug or test_prompt_order_and_function_library_prompt or test_rag_modal or test_rag_indexing or test_rag_search or test_rag_bundles or test_rag_integration)

============================= test session starts ==============================
platform darwin -- Python 3.13.3, pytest-8.3.5, pluggy-1.5.0 -- /Users/user/dev/hacka.re/_tests/playwright/.venv/bin/python
cachedir: .pytest_cache
rootdir: /Users/user/dev/hacka.re/_tests/playwright
configfile: pytest.ini
testpaths: .
plugins: playwright-0.7.0, base-url-2.1.0
collecting ... collected 936 items / 752 deselected / 184 selected

test_button_tooltips.py::test_button_tooltips[chromium0] PASSED          [  0%]
test_clear_chat.py::test_clear_chat_button_exists[chromium0] PASSED      [  1%]
test_clear_chat.py::test_clear_chat_confirmation_dialog[chromium0] PASSED [  1%]
test_clear_namespace_settings.py::test_clear_namespace_settings[chromium0] PASSED [  2%]
test_context_window_scaling.py::test_context_window_scaling[chromium0] PASSED [  2%]
test_copy_chat.py::test_copy_chat_button_exists[chromium0] PASSED        [  3%]
test_copy_chat.py::test_copy_chat_functionality[chromium0] PASSED        [  3%]
test_copy_chat.py::test_copy_chat_button_tooltip[chromium0] PASSED       [  4%]
test_debug_mode.py::test_debug_mode_checkbox_exists[chromium0] PASSED    [  4%]
test_debug_mode.py::test_debug_mode_toggle[chromium0] PASSED             [  5%]
test_default_prompts.py::test_default_prompts_section_exists[chromium0] PASSED [  5%]
test_default_prompts.py::test_default_prompts_expand_collapse[chromium0] PASSED [  6%]
test_default_prompts.py::test_default_prompts_content[chromium0] PASSED  [  7%]
test_default_prompts.py::test_default_prompts_selection[chromium0] PASSED [  7%]
test_default_prompts.py::test_default_prompts_info_button[chromium0] PASSED [  8%]
test_default_prompts.py::test_default_prompts_name_click[chromium0] PASSED [  8%]
test_function_copy_buttons.py::test_function_copy_buttons_exist[chromium0] PASSED [  9%]
test_function_copy_buttons.py::test_function_copy_functionality[chromium0] PASSED [  9%]
test_function_deletion.py::test_function_deletion_removes_entire_bundle[chromium0] PASSED [ 10%]
test_function_deletion.py::test_multiple_function_collections[chromium0] PASSED [ 10%]
test_function_editing.py::test_function_editing[chromium0] PASSED        [ 11%]
test_function_group_colors.py::test_function_collection_colors[chromium0] FAILED [ 11%]
test_function_icons.py::test_function_calling_icons[chromium0] FAILED    [ 12%]
test_function_icons.py::test_multiple_function_calls_colors[chromium0] FAILED [ 13%]
test_function_library_multi.py::test_function_library_multi[chromium0] FAILED [ 13%]
test_function_library_sharing.py::test_function_library_sharing[chromium0] FAILED [ 14%]
test_function_modal.py::test_function_modal_basic[chromium0] PASSED      [ 14%]
test_function_modal.py::test_function_modal_elements[chromium0] PASSED   [ 15%]
test_function_parsing_logic.py::test_all_functions_callable_by_default[chromium0] FAILED [ 15%]
test_function_parsing_logic.py::test_only_tagged_functions_callable[chromium0] FAILED [ 16%]
test_function_parsing_logic.py::test_tool_tag_works[chromium0] FAILED    [ 16%]
test_function_parsing_logic.py::test_single_line_comment_tags[chromium0] FAILED [ 17%]
test_function_parsing_logic.py::test_mixed_tag_types[chromium0] FAILED   [ 17%]
test_function_tooltip.py::test_function_modal_basic[chromium0] PASSED    [ 18%]
test_function_tooltip.py::test_function_modal_elements[chromium0] PASSED [ 19%]
test_logo_tooltip.py::test_heart_logo_tooltip[chromium0] FAILED          [ 19%]
test_modals.py::test_settings_modal[chromium0] PASSED                    [ 20%]
test_modals.py::test_prompts_modal[chromium0] PASSED                     [ 20%]
test_modals.py::test_share_modal[chromium0] PASSED                       [ 21%]
test_model_context_window.py::test_model_context_window_display[chromium0] SKIPPED [ 21%]
test_model_selection_context_window.py::test_context_window_updates_on_model_selection[chromium0] PASSED [ 22%]
test_model_selection_o4_mini.py::test_o4_mini_context_window_display[chromium0] PASSED [ 22%]
test_models_context_simple.py::test_context_window_display[chromium0] FAILED [ 23%]
test_prompt_order_and_function_library_prompt.py::test_user_prompts_before_default_prompts[chromium0] PASSED [ 23%]
test_prompt_order_and_function_library_prompt.py::test_function_library_default_prompt[chromium0] FAILED [ 24%]
test_rag_bundles.py::test_rag_user_bundles_ui_elements[chromium0] FAILED [ 25%]
test_rag_bundles.py::test_rag_bundle_validation_algorithm[chromium0] PASSED [ 25%]
test_rag_bundles.py::test_rag_bundle_storage_operations[chromium0] PASSED [ 26%]
test_rag_bundles.py::test_rag_bundle_display_elements[chromium0] PASSED  [ 26%]
test_rag_bundles.py::test_rag_bundle_file_input_creation[chromium0] PASSED [ 27%]
test_rag_bundles.py::test_rag_bundle_load_button_interaction[chromium0] FAILED [ 27%]
test_rag_bundles.py::test_rag_bundle_removal_confirmation[chromium0] PASSED [ 28%]
test_rag_bundles.py::test_rag_bundle_statistics_accuracy[chromium0] PASSED [ 28%]
test_rag_indexing.py::test_rag_embedding_generation_ui[chromium0] FAILED [ 29%]
test_rag_indexing.py::test_rag_embedding_generation_process[chromium0] FAILED [ 29%]
test_rag_indexing.py::test_rag_embedding_generation_without_api_key[chromium0] FAILED [ 30%]
test_rag_indexing.py::test_rag_chunking_algorithm[chromium0] PASSED      [ 30%]
test_rag_indexing.py::test_rag_embedding_caching[chromium0] FAILED       [ 31%]
test_rag_indexing.py::test_rag_indexing_service_error_handling[chromium0] PASSED [ 32%]
test_rag_indexing.py::test_rag_progress_callback_functionality[chromium0] PASSED [ 32%]
test_rag_integration.py::test_rag_chat_integration_setup[chromium0] FAILED [ 33%]
test_rag_integration.py::test_rag_enhanced_chat_response[chromium0] FAILED [ 33%]
test_rag_integration.py::test_rag_context_injection_mechanism[chromium0] FAILED [ 34%]
test_rag_integration.py::test_rag_search_query_extraction[chromium0] PASSED [ 34%]
test_rag_integration.py::test_rag_end_to_end_workflow[chromium0] FAILED  [ 35%]
test_rag_integration.py::test_rag_no_relevant_context_handling[chromium0] PASSED [ 35%]
test_rag_integration.py::test_rag_multiple_source_integration[chromium0] FAILED [ 36%]
test_rag_integration.py::test_rag_enable_disable_state_integration[chromium0] FAILED [ 36%]
test_rag_integration.py::test_rag_debug_logging_functionality[chromium0] FAILED [ 37%]
test_rag_modal.py::test_rag_button_visibility[chromium0] PASSED          [ 38%]
test_rag_modal.py::test_rag_modal_open_close[chromium0] PASSED           [ 38%]
test_rag_modal.py::test_rag_modal_structure[chromium0] PASSED            [ 39%]
test_rag_modal.py::test_rag_modal_sections_exist[chromium0] PASSED       [ 39%]
test_rag_modal.py::test_rag_modal_search_section[chromium0] PASSED       [ 40%]
test_rag_modal.py::test_rag_modal_keyboard_interaction[chromium0] PASSED [ 40%]
test_rag_modal.py::test_rag_enable_disable_functionality[chromium0] PASSED [ 41%]
test_rag_search.py::test_rag_search_ui_elements[chromium0] PASSED        [ 41%]
test_rag_search.py::test_rag_search_without_index[chromium0] PASSED      [ 42%]
test_rag_search.py::test_rag_cosine_similarity_algorithm[chromium0] PASSED [ 42%]
test_rag_search.py::test_rag_search_with_mock_data[chromium0] SKIPPED    [ 43%]
test_rag_search.py::test_rag_search_ranking_and_relevance[chromium0] PASSED [ 44%]
test_rag_search.py::test_rag_search_enter_key_functionality[chromium0] SKIPPED [ 44%]
test_rag_search.py::test_rag_search_empty_query_handling[chromium0] PASSED [ 45%]
test_rag_search.py::test_rag_search_result_formatting[chromium0] SKIPPED [ 45%]
test_rag_with_precached.py::test_rag_search_with_real_embeddings[chromium0] FAILED [ 46%]
test_sharing.py::test_model_sharing_link_creation[chromium0] SKIPPED     [ 46%]
test_sharing.py::test_model_sharing_link_loading[chromium0] SKIPPED      [ 47%]
test_themes.py::test_theme_toggle_button_exists[chromium0] PASSED        [ 47%]
test_themes.py::test_theme_switching[chromium0] PASSED                   [ 48%]
test_themes.py::test_light_mode_default[chromium0] PASSED                [ 48%]
test_themes.py::test_mobile_utils_loaded[chromium0] PASSED               [ 49%]
test_token_counter_debounce.py::test_token_counter_debounce[chromium0] PASSED [ 50%]
test_button_tooltips.py::test_button_tooltips[chromium1] PASSED          [ 50%]
test_clear_chat.py::test_clear_chat_button_exists[chromium1] PASSED      [ 51%]
test_clear_chat.py::test_clear_chat_confirmation_dialog[chromium1] PASSED [ 51%]
test_clear_namespace_settings.py::test_clear_namespace_settings[chromium1] PASSED [ 52%]
test_context_window_scaling.py::test_context_window_scaling[chromium1] PASSED [ 52%]
test_copy_chat.py::test_copy_chat_button_exists[chromium1] PASSED        [ 53%]
test_copy_chat.py::test_copy_chat_functionality[chromium1] PASSED        [ 53%]
test_copy_chat.py::test_copy_chat_button_tooltip[chromium1] PASSED       [ 54%]
test_debug_mode.py::test_debug_mode_checkbox_exists[chromium1] PASSED    [ 54%]
test_debug_mode.py::test_debug_mode_toggle[chromium1] PASSED             [ 55%]
test_default_prompts.py::test_default_prompts_section_exists[chromium1] PASSED [ 55%]
test_default_prompts.py::test_default_prompts_expand_collapse[chromium1] PASSED [ 56%]
test_default_prompts.py::test_default_prompts_content[chromium1] PASSED  [ 57%]
test_default_prompts.py::test_default_prompts_selection[chromium1] PASSED [ 57%]
test_default_prompts.py::test_default_prompts_info_button[chromium1] PASSED [ 58%]
test_default_prompts.py::test_default_prompts_name_click[chromium1] PASSED [ 58%]
test_function_copy_buttons.py::test_function_copy_buttons_exist[chromium1] PASSED [ 59%]
test_function_copy_buttons.py::test_function_copy_functionality[chromium1] PASSED [ 59%]
test_function_deletion.py::test_function_deletion_removes_entire_bundle[chromium1] 